<%- layout("layouts/boilerplate.ejs") %>

<div class="admin-dashboard">
  <div class="dashboard-header">
    <div>
      <h2>Admin Dashboard</h2>
      <p style="color: #6b7280; margin-top: 0.5rem;">Manage all scholarships</p>
    </div>
    <div class="dashboard-actions">
      <a href="/admin/add-scholarship" class="btn btn-primary">
        <i class="fa-solid fa-plus"></i> Add Scholarship
      </a>
      <form action="/admin/logout" method="POST" style="display: inline;">
        <button type="submit" class="btn btn-secondary">
          <i class="fa-solid fa-sign-out-alt"></i> Logout
        </button>
      </form>
    </div>
  </div>

  <div class="stats">
    <div class="stat-card">
      <h3>Total Scholarships</h3>
      <div class="number"><%= scholarships.length %></div>
    </div>
  </div>

  <div class="scholarships-table-container">
    <% if (scholarships.length > 0) { %>
    <table class="scholarships-table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Type</th>
          <th>Amount</th>
          <th>Deadline</th>
          <th>Region</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% scholarships.forEach(scholarship => { %>
        <tr>
          <td>
            <div class="scholarship-title"><%= scholarship.title %></div>
            <small style="color: #6b7280;"><%= scholarship.About.substring(0, 50) %>...</small>
          </td>
          <td><span class="scholarship-type"><%= scholarship.type %></span></td>
          <td><%= scholarship.Amount %></td>
          <td><%= scholarship.Deadline.toLocaleDateString("en-GB") %></td>
          <td><%= scholarship.Region %></td>
          <td>
            <div class="action-buttons">
              <a href="/admin/edit-scholarship/<%= scholarship._id %>" class="btn-edit">
                <i class="fa-solid fa-pencil"></i> Edit
              </a>
              <form 
                action="/admin/scholarship/<%= scholarship._id %>/delete" 
                method="POST" 
                style="display: inline;"
                onsubmit="return confirm('Are you sure you want to delete this scholarship?');"
              >
                <button type="submit" class="btn-delete">
                  <i class="fa-solid fa-trash"></i> Delete
                </button>
              </form>
            </div>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
    <% } else { %>
    <div class="empty-state">
      <i class="fa-solid fa-inbox"></i>
      <p>No scholarships found</p>
      <a href="/admin/add-scholarship" class="btn btn-primary">Create First Scholarship</a>
    </div>
    <% } %>
  </div>
</div>
